# react-grpc-web

![npm](https://img.shields.io/npm/v/react-grpc-web)

Typed [React](https://github.com/facebook/react) hooks for [gRPC-web](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md).

## Install

```sh
npm install react-grpc-web
```

### Requirements

- react >= 16.8

## Usage

Before using this library, you have to generate [Typescript clients from `.proto`s with grpc-web](https://github.com/grpc/grpc-web#typescript-support).

### Unary RPC

```tsx
import { useUnaryRPC } from "react-grpc-web";

// client class generated by grpc-web
import { EchoServiceClient } from "./EchoServiceClientPb";
// request class generated by grpc-web
import { EchoRequest } from "./echo_pb";

const client = new EchoServiceClient("http://localhost:8080");

export const App = () => {
  const { loading, data, error } = useUnaryRPC(client.echo, EchoRequest, {
    variables: { message: "hello" },
  });

  return (
    <div>
      {loading ? (
        <div>loading...</div>
      ) : error ? (
        <div>{error}</div>
      ) : (
        <>
          <div>message: {data.message}</div>
          <div>messageCount: {data.messageCount}</div>
        </>
      )}
    </div>
  );
};
```

### Server Streaming RPC

```tsx
import { useServerStreamingRPC } from "react-grpc-web";

// client class generated by grpc-web
import { EchoServiceClient } from "./EchoServiceClientPb";
// request class generated by grpc-web
import { ServerStreamingEchoRequest } from "./echo_pb";

const client = new EchoServiceClient("http://localhost:8080");

export const App = () => {
  const { data } = useServerStreamingRPC(
    client.serverStreamingEcho,
    ServerStreamingEchoRequest,
    {
      variables: { message: "11", messageCount: 456, messageInterval: 1234 },
    }
  );
  return (
    <div>
      {data.map((d) => (
        <div key={d.message}>message: {d.message}</div>
      ))}
    </div>
  );
};
```
